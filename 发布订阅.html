<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- /**
*发布订阅模式
* @description: 
* @param {type} 
* @return: 
*/   -->

<body>

    <script>
        class Event {
            constructor() {
                this.callbacks = {};
            }
            $off(name) {
                this.callbacks[name] = null;
            }
            $emit(name, args) {
                let cbs = this.callbacks[name];
                if (cbs) {
                    cbs.forEach(c => {
                        c.call(this, args);
                    });
                }
            }

            $on(name, fn) {
                (this.callbacks[name] || (this.callbacks[name] = [])).push(fn);
            }

        }

        let event = new Event();
        console.log(event);

        event.$on('event1', function (arg) {
            console.log('事件1', arg);
        })
        event.$on('event2', function (arg) {
            console.log('事件2', arg);
        })
        event.$on('event3', function (arg) {
            console.log('事件3', arg);
        })
    </script>

</body>

</html>